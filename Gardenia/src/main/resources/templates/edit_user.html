<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>User Master</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">
<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/css/fileinput.min.css">
<link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css">
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/piexif.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/sortable.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/plugins/purify.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-fileinput/4.4.9/js/fileinput.min.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
<link href="" th:href="@{/css/style.css}" rel="stylesheet"/>
<style>

thead th {
	font-size: 9px;
	font-weight: 700;
}

tbody td {
	font-size: 10px;
	font-weight: 100;
}

.btn {
	font-size: 9px;
	width: 65px;
	height: 25px;
	float: right;
}

.btn_sm {
	font-size: 9px;
	width: 80px;
	height: 25px;
}

h1 {
	font-size: 18px;
}

label {
	font-size: 12px;
}

input[type=text] {
	font-size: 12px;
}

#dropDownList {
	font-size: 12px;
	height: auto;
}

.card {
	border-radius: 20px;
	border-bottom: 5px solid black;
	border-top: 5px solid #068203;
}

.card h1 {
	margin-top: 30px;
}
#thumbnail{
width:70px;
height:70px;
}

#statusList{
	font-size: 12px;
	height: auto;
}

.file-upl{
margin-top:33px;
font-size:smaller;
}
.dir-img{

position:relative;
width:70px;
height:70px;
}
#thumbnail {position:absolute; top: 0px; left: 70px; font-size:15px; cursor: pointer }
#img-preview{display: none;width:70px;
height:70px;}


</style>
<script>
$(document).ready(function(){	
	$('#fileImage').change(function(){
		showImageThumbnail(this);
	});
	
	function showImageThumbnail(fileInput){
		file = fileInput.files[0];
		reader = new FileReader();
		
		reader.onload = function(e) {
			$('#thumbnail').attr('src',e.target.result);
		};
		
		reader.readAsDataURL(file);
	}
	});

function myFunc(){
	var firstName = $("#firstName").val();
	var lastName = $("#lastName").val();
	if(firstName!= null && lastName != null){
		$("#fullName").val(firstName + " " + lastName);
	}else if(firstName!= null && lastName == null){
		$("#fullName").val(firstName);
	}else if(firstName== null && lastName != null){
		$("#fullName").val(lastName);
	}else{
		$("#fullName").val("");
	}
}

function closeWin() {
  document.getElementById("image1").style.display = "none";
  document.getElementById("thumbnail").style.display = "none";
  document.getElementById("img-preview").style.display = "block";
  var x = document.getElementById("img-preview");
  if (x.style.display === "none") {
    x.style.display = "none";
  } else {
    x.style.display = "block";
  }
}

$(document).ready(function(){	
	$('#fileImage').change(function(){
		showImageThumbnail(this);
	});
	
	function showImageThumbnail(fileInput){
		file = fileInput.files[0];
		reader = new FileReader();
		
		reader.onload = function(e) {
			$('#img-preview').attr('src',e.target.result);
		};
		
		reader.readAsDataURL(file);
	}
	});
</script>
</head>
<body>
<nav class="headbar">
<div class="btn1">
  <span class="fa fa-bars"></span>
</div>
<div class="sidebar">
  <div class="text">
    <img th:src="@{/images/logo.png}" class="img-responsive"/>
  </div>
  <ul>
    <li class="active"><a th:href="@{/}">Dashboard</a></li>
    <li>
      <a class="feat-btn">Masters
        <span class="fa fa-caret-down first"></span>
      </a>
      <ul class="feat-show">
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/country}">Country Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/state}">State Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/region}">Region Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/district}">District Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/city}">City Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/area}">Area Master</a></li>
        <li sec:authorize="hasAnyRole('USER')"><a th:href="@{/user}">User Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/distributor}">Distributor Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/product}">Product Master</a></li>
        <li sec:authorize="hasRole('MIS')"><a th:href="@{/hqmaster}">HQ Master</a></li>
      </ul>
    </li>
    <!-- <li>
      <a href="#" class="serv-btn">Services
        <span class="fa fa-caret-down second"></span>
      </a>
      <ul class="serv-show">
        <li><a href="#">App Design</a></li>
        <li><a href="#">Web Design</a></li>
      </ul>
    </li>
    <li><a href="#">Portfolio</a></li>
    <li><a href="#">Overview</a></li>
    <li><a href="#">Shortcuts</a></li>
    <li><a href="#">Feedback</a></li> -->
  </ul>
</div>
<div class="btn-logout">
  <a th:href="@{/logout}"><span class="fa fa-power-off"></span></a>
</div>
</nav>

	<div class="container">
		<div class="row">
			<div
				class="col-lg-12 col-md-12 col-sm-12 mt-5 container justify-content-center card">
				<h1 class="text-center">Update User</h1>
				<div class="card-body">
					<form th:action="@{/user/{id} (id=${user.id})}" th:object="${user}"
						method="POST">
						<div class="row">
							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<label>Login</label> <input type="text" name="login"
									th:field="*{login}" class="form-control"
									placeholder="Enter Login" />
							</div>

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<label>First Name</label> <input type="text" name="first_name" id="firstName" oninput="myFunc()"
									th:field="*{firstName}" class="form-control"
									placeholder="Enter First Name" />
							</div>

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Last Name</label> <input type="text" name="last_name" id="lastName" oninput="myFunc()"
										th:field="*{lastName}" class="form-control"
										placeholder="Enter Last Name" />
								</div>
							</div>

							<div class="col-lg-3 col-md-3 col-sm-6 file-upl form-group">
								<div class="form-group">
									<input type="file" name="image"
									accept="image/png, image/jpeg" id="fileImage" />
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-lg-3 col-md-3 col-sm-3 form-group">
					
							<div class="form-group">	
							<label>Full Name</label>
							<input
							type="text"
							id="fullName"
							name="fullName"
							th:field="*{fullName}"
							class="form-control"
							placeholder="Enter Full Name"
							/>
						</div>
						</div>
							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Employee Code</label> <input type="text" name="emp_code"
										th:field="*{emp_code}" class="form-control"
										placeholder="Enter Employee Code" />
								</div>
							</div>

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Team</label> <input type="text" name="team"
										th:field="*{team}" class="form-control"
										placeholder="Enter Team" />
								</div>
							</div>

							

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<p>
										<img th:src="@{${images + ''}}" class="dir-img" id="image1"/>
										<span id="thumbnail" onclick="closeWin()">X</span>
										<p>
											<img id="img-preview" alt="Image Preview"/>
										</p>
									</p>
								</div>
							</div>
						</div>

						<div class="row">
						<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Role</label><select class="form-control" id="dropDownList" name="roles">
    						
    								<option th:each="option : ${options}"
    										th:selected="${option} eq ${userRoles}?true:false"
    										th:value="${option}"
											th:text="${option}"></option>
							</select>
								</div>
							</div>
							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Status</label> <select class="form-control"
										id="statusList" name="status">
										<option
											th:each="status : ${T(com.example.demo.Enum.Status).values()}"
											th:selected="${status.name()} eq ${userStatus}?true:false"
											th:value="${status}" th:text="${status}"></option>
									</select>
							</div>
						</div>

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Region</label>  <select class="form-control"
										id="dropDownList" name="region_id">

										<option th:each="region_name : ${region_name}"
											th:value="${region_name.id}"
											th:selected="${region_name.id} eq ${region_code_ID}?true:false"
											th:text="${region_name.region_name}"></option>
									</select>
								</div>
							</div>

							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>State</label> <select class="form-control"
										id="dropDownList" name="state_id">

										<option th:each="state_name : ${state_name}"
											th:value="${state_name.id}"
											th:selected="${state_name.id} eq ${state_code_ID}?true:false"
											th:text="${state_name.state_name}"></option>
									</select>
								</div>
							</div>

							
							</div>

						<div class="row">
						<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>Area</label>  <select class="form-control"
										id="dropDownList" name="area_id">

										<option th:each="area_name : ${area_name}"
											th:value="${area_name.id}"
											th:selected="${area_name.id} eq ${area_code_ID}?true:false"
											th:text="${area_name.area_name}"></option>
									</select>
								</div>
							</div>
							<div class="col-lg-3 col-md-3 col-sm-6 form-group">
								<div class="form-group">
									<label>HQ Name</label> <select class="form-control"
										id="dropDownList" name="hq_id">

										<option th:each="hq_name : ${hq_name}"
											th:value="${hq_name.id}"
											th:selected="${hq_name.id} eq ${hq_code_ID}?true:false"
											th:text="${hq_name.hq_name}"></option>
									</select>
								</div>
							</div>
						</div>

						<div class="box-footer">
							<button type="submit" class="btn btn-success">Update</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
<script>
$('.btn1').click(function(){
  $(this).toggleClass("click");
  $('.sidebar').toggleClass("show");
});
$('.feat-btn').click(function(){
  $('nav ul .feat-show').toggleClass("show");
  $('nav ul .first').toggleClass("rotate");
});
$('.serv-btn').click(function(){
  $('nav ul .serv-show').toggleClass("show1");
  $('nav ul .second').toggleClass("rotate");
});
$('nav ul li').click(function(){
  $(this).addClass("active").siblings().removeClass("active");
});
</script>
</body>
</html>